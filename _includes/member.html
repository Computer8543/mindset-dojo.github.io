{%- comment -%}
  _includes/member.html
  Expects:
    include.member → the YAML object
    include.slug   → the slug string
{%- endcomment -%}

<section class="md-member-card">
  {% capture file %}
  {% include_relative avatars/{{ include.slug }}.b64 %}
  {% endcapture %}

  {% capture raw_b64 %}
    {% include {{ file }} %}
  {% endcapture %}
  
  {% assign b64 = raw_b64 | strip_newlines | strip %}

  <img
    src="data:image/jpeg;base64,{{ b64 }}"
    alt="{{ include.member.name }}"
    width="100" height="100"
  />
  <h2>{{ include.member.name }}</h2>

  {%- if include.member.linkedin or include.member.belt_level -%}
    <div class="md-group">
      {%- if include.member.linkedin -%}
        <a href="{{ include.member.linkedin }}" target="_blank">
          {% include icons/linkedin.svg class="md-icon-svg" %}
        </a>
      {%- endif -%}
      {%- if include.member.belt_level -%}
        {% assign level = site.data.belts[include.member.belt_level] %}
        {% include icons/belt.svg class="md-belt-svg" color=level.color title=level.label %}
      {%- endif -%}
    </div>
  {%- endif -%}

  {%- if include.member.links -%}
    <ul>
      {% for link in include.member.links %}
        <li><a href="{{ link.url }}">{{ link.label }}</a></li>
      {% endfor %}
    </ul>
  {%- endif -%}
</section>
