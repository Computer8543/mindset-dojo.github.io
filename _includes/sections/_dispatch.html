{%- comment -%}
Static dispatcher for section includes (broad Jekyll compatibility).
Each case delegates to a small, focused template for that section type.
{%- endcomment -%}

{%- case section.type -%}

  {%- when 'author' -%}
    {%- assign slug = page.slug | downcase -%}
    {%- assign one_author = "" | split:"|" -%}
    {%- assign one_author = one_author | push: slug -%}
    {% include sections/authors.html section=section authors=one_author %}

  {%- when 'authors' -%}
    {% include sections/authors.html section=section %}

  {%- when 'collection-item' -%}
    {% include sections/collection-item.html section=section data=data %}

  {%- when 'collection-stream' -%}
    {%- assign section_has_authors = section.data and section.data.authors -%}
    {%- if page.sections_key == "author" and section_has_authors == false -%}
      {%- assign author_slug = page.slug | split:"|" -%}
      {% include sections/collection-stream.html section=section authors=author_slug collection=section.data.collection %}
    {%- elsif page.layout == "post" -%}
      {%- comment -%} On post pages: include the forms collection stream.
       If the post declares page.forms, pass it (as an array). Otherwise omit the forms override. {%- endcomment -%}

      {%- if page.forms -%}
        {%- assign forms_arr = page.forms | array -%}
        {% include sections/collection-stream.html section=section collection="forms" forms=forms_arr %}
      {%- else -%}
        {% include sections/collection-stream.html section=section collection="forms" %}
      {%- endif -%}
    {%- endif -%}



  {%- when 'ctas' -%}
    {% include sections/ctas.html section=section %}

  {%- when 'designations' -%}
    {% include sections/designations.html section=section data=data %}
  
  {%- when 'levels' -%}
    {% include sections/levels.html section=section %}

  {%- when 'list' -%}
    {% include sections/list.html section=section %}

  {%- when 'markdown' -%}
    {% include sections/markdown.html section=section %}

  {%- when 'principles' -%}
    {% include sections/principles.html section=section page_data=site.data.sections.principles %}

  {%- when 'quote' -%}
    {% include sections/quote.html section=section %}

  {%- when 'text' -%}
    {% include sections/text.html section=section %}

{%- endcase -%}
