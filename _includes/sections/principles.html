{%- comment -%}
Render: Principle List (generalized)

Assumptions (no defensive checks):
- section.data.types: string to identify section type ("principles")
- section.data.principles: array of strings (>= 1)
- calls list.html to render as description list with:
  - label: "Principles"
{%- endcomment -%}

{%- assign src = include.principles | default: section.data.principles | default: page.principles -%}
{%- assign section_types = include.types | default: section.data.types | default: page.principles_types -%}
{%- assign principles = site.data.sections.principles -%}
{%- assign matched_principles = "" | split: "|" -%}
{%- assign list_section = "" -%}

{% if section_types %}
    {% for type in principles %}
        {% if type.principle_types == section_types %}
            {%- assign principles = type -%}
        {% endif %}
    {% endfor %}
    {%- assign label_val = principles.label | default: "Principles" -%}
    {%- assign items_val = principles.items -%}
    {%- assign list_section = principles | merge: 
        {
          "label": label_val,
          "items": items_val
        } 
    -%}
{% elsif src %}
  {% for type in principles.principle_types -%}
  {%- for principle in type.items -%}
    {%- assign pid = principle.id | to_s -%}
    {%- for want in src -%}
      {%- assign want_norm = want | to_s | slugify -%}
      {%- if want == pid or want_norm == pid | slugify -%}
        {%- assign matched_principles = matched_principles | push: principle -%}
        {%- break -%}
      {%- endif -%}
    {%- endfor -%}
  {%- endfor -%}
{%- endfor -%}

{%- assign list_section = 
    {
      "label": "Principles",
      "items": matched_principles
    }
 -%}
{%- endif -%}

{% include sections/list.html section=list_section %}