{%- comment -%}
Usage:
  {% include cta-group.html ctas=context.calls_to_action %}
  or
  {% include cta-group.html ctas=page.calls_to_action %}

Expects:
  - include.ctas: array of objects like:
      - label: "Cross the Threshold"
        ref: "program"   # key in site.action_links

In _config.yml:
action_links:
  pagei: /internal
  pagex: https://github.com
{%- endcomment -%}

{%- if include.ctas and include.ctas.size > 0 -%}
  <div class="md-cta-group">
    {%- for cta in include.ctas -%}
      {%- assign raw_href = site.action_links[cta.ref] -%}
      {%- if raw_href -%}
        {%- comment -%} Compute normalized href {%- endcomment -%}
        {%- assign href = raw_href -%}
        {%- unless raw_href contains '://' -%}
          {%- assign href = raw_href | relative_url -%}
        {%- endunless -%}

        {%- comment -%} Compute extra attributes for external links {%- endcomment -%}
        {%- capture extra_attrs -%}{% if raw_href contains '://' %} target="_blank" rel="noopener noreferrer"{% endif %}{%- endcapture -%}

        <a class="btn" href="{{ href }}"{{ extra_attrs }}>{{ cta.label }}</a>
      {%- endif -%}
    {%- endfor -%}
  </div>
{%- endif -%}
